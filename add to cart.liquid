<!-- Load the custom elements logic -->
<script src="{{ 'product-form.js' | asset_url }}" type="module"></script>

<!-- START: Add-to-Cart Form -->
<product-form-component data-product-id="7770300416118">
  <form>
    <!-- Variant ID (required by handleSubmit) -->
    <input type="hidden" name="id" value="42352367304822" ref="variantId" />

    <!-- Animated Button Wrapper -->
    <add-to-cart-component
      data-product-variant-media="https://cdn.shopify.com/s/files/1/0623/9718/6166/files/ChatGPTImageJun28_2025_08_20_20AM.png?v=1751297528">

      <!-- âœ… FIXED: Ref moved into a div wrapper -->
      <div ref="addToCartButtonContainer">
        <button
          type="submit"
          ref="addToCartButton"
          class="atc-button"
          onclick="this.closest('product-form-component').handleSubmit(event)"
          aria-label="Add this item to your cart">
          <span class="bg-slide"></span>
          <span class="label">Add to cart</span>
        </button>
      </div>

    </add-to-cart-component>

    <!-- Live region for screen-reader feedback -->
    <div ref="liveRegion" class="visually-hidden" aria-live="polite"></div>
  </form>
</product-form-component>

<!-- STYLES -->
<style>
  .visually-hidden {
    position: absolute !important;
    width: 1px; height: 1px;
    margin: -1px; padding: 0;
    overflow: hidden; clip: rect(0,0,0,0);
    border: 0;
  }

  add-to-cart-component .atc-button {
    position: relative; overflow: hidden;
    background: #111; color: #fff;
    padding: .75rem 1.5rem; border: none;
    font-size: 1rem; cursor: pointer;
    z-index: 0;
  }

  .atc-button .bg-slide {
    content: '';
    position: absolute; top: 0; left: -100%;
    width: 100%; height: 100%;
    background: #0055ff;
    transition: left .3s ease;
    z-index: -1;
  }

  .atc-button:hover .bg-slide {
    left: 0;
  }

  .atc-button .label {
    position: relative; z-index: 1;
  }
</style>
